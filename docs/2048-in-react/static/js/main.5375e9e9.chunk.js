(this["webpackJsonp2048-in-react"]=this["webpackJsonp2048-in-react"]||[]).push([[0],[,,,,,,,,,,,,,,,,,function(t,e,n){},,function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var i=n(1),c=n.n(i),a=n(10),r=n.n(a),o=n(3),s=(n(17),n(0)),u=function(t){var e=t.children,n=t.onClick;return Object(s.jsx)("button",{className:"button",onClick:n,children:e})},b=n(26),d=n(2),j=n(7),l=c.a.createContext({containerWidth:0,tileCount:m}),f=function(t){var e=t.children,n=t.containerWidth,i=void 0===n?0:n,c=t.tileCount,a=void 0===c?m:c;return Object(s.jsx)(l.Provider,{value:{containerWidth:i,tileCount:a},children:e})},O=function(){var t=Object(i.useContext)(l);return[t.containerWidth,t.tileCount]},m=(n(19),4),p=n(8),v=(n(20),function(){var t=O(),e=Object(o.a)(t,2)[1];return Object(s.jsx)("div",{className:"grid",children:function(){for(var t=e*e,n=[],i=0;i<t;i+=1)n.push(Object(s.jsx)("div",{className:"grid-cell"},"".concat(i)));return n}()})}),g=n(11),h=(n(21),n.p+"static/media/c1.db434afc.png"),x=n.p+"static/media/c2.d2828361.png",E=n.p+"static/media/c3.a80ab651.png",y=n.p+"static/media/c4.8b17faba.png",C=n.p+"static/media/c5.60057e8c.png",w=n.p+"static/media/c6.f2f16bb9.png",N=n.p+"static/media/c7.04ca287b.png",T=n.p+"static/media/c8.90cd2d9c.png",I=n.p+"static/media/c9.b59ea8af.png",k=n.p+"static/media/c10.23e91495.png",M=n.p+"static/media/c11.4ee20eb7.png",A=function(t){var e=t.value,n=t.position,c=t.zIndex,a=O(),r=Object(o.a)(a,2),u=r[0],b=r[1],d=Object(i.useState)(1),j=Object(o.a)(d,2),l=j[0],f=j[1],m=function(t){var e=Object(i.useRef)();return Object(i.useEffect)((function(){e.current=t})),e.current}(e),p=n[0]<b&&n[1]<b;Object(g.a)(p,"Tile out of bound");var v=void 0===m||m!==e;Object(i.useEffect)((function(){v&&(f(1.1),setTimeout((function(){return f(1)}),100))}),[v,l]);var A=function(t){return t/b*u},R={top:A(n[1]),left:A(n[0]),transform:"scale(".concat(l,")"),zIndex:c};return Object(s.jsx)("div",{className:"tile tile-".concat(e),style:R,children:2===e?Object(s.jsx)("img",{src:h,className:"pos-img my-auto"}):4===e?Object(s.jsx)("img",{src:x,className:"pos-img my-auto"}):8===e?Object(s.jsx)("img",{src:E,className:"pos-img my-auto"}):16===e?Object(s.jsx)("img",{src:y,className:"pos-img my-auto"}):32===e?Object(s.jsx)("img",{src:C,className:"pos-img my-auto"}):64===e?Object(s.jsx)("img",{src:w,className:"pos-img my-auto"}):128===e?Object(s.jsx)("img",{src:N,className:"pos-img my-auto"}):256===e?Object(s.jsx)("img",{src:T,className:"pos-img my-auto"}):512===e?Object(s.jsx)("img",{src:I,className:"pos-img my-auto"}):1024===e?Object(s.jsx)("img",{src:k,className:"pos-img my-auto"}):2048===e?Object(s.jsx)("img",{src:M,className:"pos-img my-auto"}):e})},R=(n(22),["id"]),L=function(t){var e=t.tiles,n=t.tileCountPerRow,i=void 0===n?m:n,c=116*i,a=c+16,r=e.map((function(t){var e=t.id,n=Object(p.a)(t,R);return Object(s.jsx)(A,Object(d.a)(Object(d.a)({},n),{},{zIndex:e}),"tile-".concat(e))}));return Object(s.jsx)("div",{className:"board",style:{width:a},children:Object(s.jsxs)(f,{containerWidth:c,tileCount:i,children:[Object(s.jsx)("div",{className:"tile-container",children:r}),Object(s.jsx)(v,{})]})})},D=1,_=n(12),S=n(4),P={tiles:{},byIds:[],hasChanged:!1,inMotion:!1},W=function(t,e){switch(e.type){case"CREATE_TILE":return Object(d.a)(Object(d.a)({},t),{},{tiles:Object(d.a)(Object(d.a)({},t.tiles),{},Object(S.a)({},e.tile.id,e.tile)),byIds:[].concat(Object(j.a)(t.byIds),[e.tile.id]),hasChanged:!1});case"UPDATE_TILE":return Object(d.a)(Object(d.a)({},t),{},{tiles:Object(d.a)(Object(d.a)({},t.tiles),{},Object(S.a)({},e.tile.id,e.tile)),hasChanged:!0});case"MERGE_TILE":var n=t.tiles,i=e.source.id,c=e.destination.id,a=(n[i],n[c],Object(p.a)(n,[i,c].map(_.a)));return Object(d.a)(Object(d.a)({},t),{},{tiles:Object(d.a)(Object(d.a)({},a),{},Object(S.a)({},e.destination.id,{id:e.destination.id,value:e.source.value+e.destination.value,position:e.destination.position})),byIds:t.byIds.filter((function(t){return t!==e.source.id})),hasChanged:!0});case"START_MOVE":return Object(d.a)(Object(d.a)({},t),{},{inMotion:!0});case"END_MOVE":return Object(d.a)(Object(d.a)({},t),{},{inMotion:!1});default:return t}},F=void 0,U=function(){var t=Object(i.useRef)(!0),e=[function(){return D++}],n=Object(o.a)(e,1)[0],c=Object(i.useReducer)(W,P),a=Object(o.a)(c,2),r=a[0],s=a[1],u=r.tiles,b=r.byIds,l=r.hasChanged,f=r.inMotion,O=Object(i.useCallback)((function(t){var e=t.position,i=t.value,c={id:n(),position:e,value:i};s({type:"CREATE_TILE",tile:c})}),[n]),p=function(t,e){setTimeout((function(){return function(t,e){s({type:"MERGE_TILE",source:t,destination:e})}(t,e)}),250)},v=function(t){s({type:"UPDATE_TILE",tile:t})},g=Object(i.useCallback)((function(){var t=new Array(m*m).fill(0);return b.forEach((function(e){var n=u[e].position,i=E(n);t[i]=e})),t}),[b,u]),h=Object(i.useCallback)((function(){return g().reduce((function(t,e,n){return 0===e?[].concat(Object(j.a)(t),[y(n)]):t}),[])}),[g]),x=Object(i.useCallback)((function(){var t=h();if(t.length>0){var e=t[Math.floor(Math.random()*t.length)];O({position:e,value:2})}}),[h,O]),E=function(t){return t[1]*m+t[0]},y=function(t){return[t%m,Math.floor(t/m)]},C=function(t,e){s({type:"START_MOVE"});for(var n=m-1,i=function(i){var c=t(i),a=void 0,r=0;c.forEach((function(t,c){var o=u[t];if(void 0!==a&&a.value===o.value){var s=Object(d.a)(Object(d.a)({},o),{},{position:a.position,mergeWith:a.id});return p(s,a),a=void 0,r+=1,v(s)}var b=Object(d.a)(Object(d.a)({},o),{},{position:y(e(i,c,r,n))});if(a=b,function(t,e){var n=t.position[0]!==e.position[0],i=t.position[1]!==e.position[1];return n||i}(o,b))return v(b)}))},c=0;c<m;c+=1)i(c);setTimeout((function(){return s({type:"END_MOVE"})}),250)};return Object(i.useEffect)((function(){if(t.current)return O({position:[0,1],value:2}),O({position:[0,2],value:2}),void(t.current=!1);!f&&l&&x()}),[l,f,O,x]),[b.map((function(t){return u[t]})),C.bind(F,(function(t){var e=g();return[e[t*m+0],e[t*m+1],e[t*m+2],e[t*m+3]].filter((function(t){return 0!==t}))}),(function(t,e,n,i){return t*m+e-n})),C.bind(F,(function(t){var e=g();return[e[t*m+0],e[t*m+1],e[t*m+2],e[t*m+3]].filter((function(t){return 0!==t})).reverse()}),(function(t,e,n,i){return t*m+i+n-e})),C.bind(F,(function(t){var e=g();return[e[t+0*m],e[t+1*m],e[t+2*m],e[t+3*m]].filter((function(t){return 0!==t}))}),(function(t,e,n,i){return t+m*(e-n)})),C.bind(F,(function(t){var e=g();return[e[t+0*m],e[t+1*m],e[t+2*m],e[t+3*m]].filter((function(t){return 0!==t})).reverse()}),(function(t,e,n,i){return t+m*(i-e+n)}))]},V=function(){var t=U(),e=Object(o.a)(t,5),n=e[0],c=e[1],a=e[2],r=e[3],u=e[4],d=Object(b.a)((function(t){switch(t.preventDefault(),t.code){case"ArrowLeft":c();break;case"ArrowRight":a();break;case"ArrowUp":r();break;case"ArrowDown":u()}}),250,{leading:!0,trailing:!1});return Object(i.useEffect)((function(){return window.addEventListener("keydown",d),function(){window.removeEventListener("keydown",d)}}),[d]),Object(s.jsx)(L,{tiles:n,tileCountPerRow:m})},z=(n(23),function(){var t=Object(i.useState)(new Date),e=Object(o.a)(t,2),n=e[0],c=e[1];return Object(s.jsxs)("div",{className:"App",children:[Object(s.jsxs)("div",{className:"header",children:[Object(s.jsx)("div",{children:Object(s.jsx)("h1",{children:"Play SQUAD 2048"})}),Object(s.jsx)("div",{children:Object(s.jsx)(u,{onClick:function(){c(new Date)},children:"Restart"})})]}),Object(s.jsx)(V,{},n.toISOString())]})}),B=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,27)).then((function(e){var n=e.getCLS,i=e.getFID,c=e.getFCP,a=e.getLCP,r=e.getTTFB;n(t),i(t),c(t),a(t),r(t)}))};r.a.render(Object(s.jsx)(c.a.StrictMode,{children:Object(s.jsx)(z,{})}),document.getElementById("root")),B()}],[[24,1,2]]]);
//# sourceMappingURL=main.5375e9e9.chunk.js.map